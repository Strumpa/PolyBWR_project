*** GE14_ASSEMBLY case with CP/IC/MOC solution : 
* BWR LATTICE array based on GE-14 geometry, 
* import tdt_data generated by glow.
* Solve 1 group CP/IC/MOC problem to ensure proper material numbering treatment
* issue : GLOW/DRAGON material ordering match, but SALOME re-writes material ids using its internal system.
* Macroscpic cross sections from GE-14 assembly pins. 
* self-shielded and solved in DRAGON : endfb8r1 - SHEM295
* Homogenized in fuel and condensed to 1 group.


MODULE GEO: MAC: G2S: SALT: MCCGT: ASM: FLU: GREP: DELETE: END: ;
PROCEDURE assertS ;
LINKED_LIST GEOISO GEOSPC TRACKIC TRACKCP TRACKMOC PIJ SYS FLUX ;

SEQ_BINARY TRACKFILIC TRACKFILCP TRACKFILMOC ;
SEQ_ASCII tdt_iso :: FILE 'GE-14_assembly_IC_MACRO_TISO.dat' ;
SEQ_ASCII glow_tiso.ps :: FILE 'GE14_assembly_GLOW_TISO.ps' ;

REAL keffGEOCP keffGEOPIJ keffGEOIC keffGEOMOC ;
REAL keffGLOWCP keffGLOPIJ keffGLOWIC keffGLOWMOC ;
REAL delCPIC delMOCIC deltak ;

* ---
* TRACKING PARAMTERES
* ---
ECHO "BEGIN GE14_ASSEMBLY multicell CASE" ;

INTEGER an2d := 24 ;  ! ANGULAR QUADRATURE PARAMETER
REAL densur := 100.0 ; ! DENSITY OF INTEGRATION LINES CM^-1
glow_tiso.ps := G2S: tdt_iso :: ;

*----
ECHO " --- GLOW CASES TREATMENT --- " ;
*** TREAT ALL GLOW CASES SECOND ***

TRACKIC TRACKFILIC := SALT: tdt_iso ::
     EDIT 2
     TITLE "MULTICELL SURFACIC GE14_A GLOW+MACRO CASE"
     TISO <<an2d>> <<densur>>
     IC EPSJ 1.0E-5
     ;

TRACKCP TRACKFILCP := SALT: tdt_iso ::
     EDIT 2
     TITLE "TISO CP SURFACIC GE14_A GLOW+MACRO CASE"
     TISO <<an2d>> <<densur>>
     NOIC
     ;

TRACKMOC TRACKFILMOC := SALT: tdt_iso ::
     EDIT 2
     TITLE "TISO MOC SURFACIC GE14_A GLOW+MACRO CASE"
     TISO EQW <<an2d>> <<densur>>
     NOIC
     ;

* MOC tracking
TRACKMOC := MCCGT: TRACKMOC TRACKFILMOC ::
  EDIT 0
;


END: ;